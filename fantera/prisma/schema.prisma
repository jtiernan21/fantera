datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

enum KycStatus {
  NOT_STARTED
  PENDING
  UNDER_REVIEW
  ACTIVE
  REJECTED

  @@map("kyc_status")
}

model User {
  id                String    @id @default(cuid())
  privyId           String    @unique @map("privy_id")
  email             String?
  displayName       String?   @map("display_name")
  walletAddress     String?   @map("wallet_address")
  kycStatus         KycStatus @default(NOT_STARTED) @map("kyc_status")
  kycProviderUserId String?   @map("kyc_provider_user_id")
  createdAt         DateTime  @default(now()) @map("created_at")
  updatedAt         DateTime  @updatedAt @map("updated_at")

  @@map("users")
}

model Club {
  id          String   @id @default(cuid())
  name        String
  ticker      String   @unique
  exchange    String
  crestUrl    String   @map("crest_url")
  colorConfig Json     @map("color_config")
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  prices Price[]

  @@map("clubs")
}

model Price {
  id        String   @id @default(cuid())
  clubId    String   @map("club_id")
  price     Float
  changePct Float    @map("change_pct")
  updatedAt DateTime @default(now()) @map("updated_at")

  club Club @relation(fields: [clubId], references: [id])

  @@unique([clubId])
  @@map("prices")
}
